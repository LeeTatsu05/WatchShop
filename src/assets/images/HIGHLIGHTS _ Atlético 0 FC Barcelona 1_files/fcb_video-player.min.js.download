"use strict";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}PULSE.app.templates["forca-button"]=_.template('<div class="" data-widget="forca-barca" data-reaction-type="VIDEO" data-reaction-id="<%= id %>" data-analytics-label="<%= title %>"> <div class="força-barça js-forca-barca"> <div class="força-barça__label-wrapper"> <div class="força-barça__labels"> <div class="força-barça__title"><%= PULSE.I18N.lookup(\'label.forca-barca\') %></div> <div class="força-barça__section"> <svg class="icon max-claps-fire-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#fire"></use></svg> <div class="força-barça__counter js-forca-barca-counter"></div> </div> </div> </div> <div class="força-barça__icon js-forca-barca-button" role="button" tabindex="0"> <span class="visually-hidden"><%= PULSE.I18N.lookup(\'label.forca-barca\') %></span> <span class="clap-count-disc js-forca-clap-counter"></span> <span class="max-clap-total js-forca-max-clap-total"></span> <svg class="icon hand-icon hand-icon--top" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 191.7 197.6"><path class="fill" d="M111.7 9.1c5.2-6.2 13-6.9 19.2-1.7 6.2 5.2 7.8 13 2.6 19.2L146.6 11c5.2-6.2 14.4-7 20.6-1.8 6.2 5.2 7 14.4 1.8 20.6l-12.5 14.9c5.2-6.2 14.6-6.1 20.8-.9 6.2 5.2 7.8 15.1 2.6 21.3l-16.5 19.6c5.2-6.2 13.8-8.3 20-3.1 6.2 5.2 6.2 13.8 1 20l-52.8 62.9c-27.3 32.5-73.9 38.4-104 13.1s-32.4-72.2-5.1-104.7l21.4-25.3c5.2-6.2 10.9-13.9 17-8.7s10.7 17.5 5.5 23.7l45.3-53.5z" fill="#fff"/><g class="stroke" fill="none" stroke="#ce202c" stroke-width="9" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"><path class="stroke" d="M80 91.1l66.5-79.3c5.2-6.2 14.4-7 20.6-1.8s7 14.4 1.8 20.6l-66.5 79.3M156.5 45.5c5.2-6.2 14.6-6.1 20.8-.9 6.2 5.2 7.8 15.1 2.6 21.3l-53.2 63.4"/><path class="stroke" d="M163.4 85.5c5.2-6.2 13.8-8.3 20-3.1 6.2 5.2 6.2 13.8 1 20l-52.8 62.9c-27.3 32.5-73.9 38.4-104 13.1s-32.4-72.2-5.1-104.7L44 48.5c5.2-6.2 10.9-13.9 17-8.7s10.7 17.5 5.5 23.7L40.1 95.1l72.2-86c5.2-6.2 13.7-7.6 19.9-2.4 6.2 5.2 6.6 14.5 1.4 20.7"/></g></svg> <svg class="icon hand-icon hand-icon--bottom" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 191.7 197.6"><path class="fill" d="M111.7 9.1c5.2-6.2 13-6.9 19.2-1.7 6.2 5.2 7.8 13 2.6 19.2L146.6 11c5.2-6.2 14.4-7 20.6-1.8 6.2 5.2 7 14.4 1.8 20.6l-12.5 14.9c5.2-6.2 14.6-6.1 20.8-.9 6.2 5.2 7.8 15.1 2.6 21.3l-16.5 19.6c5.2-6.2 13.8-8.3 20-3.1 6.2 5.2 6.2 13.8 1 20l-52.8 62.9c-27.3 32.5-73.9 38.4-104 13.1s-32.4-72.2-5.1-104.7l21.4-25.3c5.2-6.2 10.9-13.9 17-8.7s10.7 17.5 5.5 23.7l45.3-53.5z" fill="#fff"/><g class="stroke" fill="none" stroke="#ce202c" stroke-width="9" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"><path class="stroke" d="M80 91.1l66.5-79.3c5.2-6.2 14.4-7 20.6-1.8s7 14.4 1.8 20.6l-66.5 79.3M156.5 45.5c5.2-6.2 14.6-6.1 20.8-.9 6.2 5.2 7.8 15.1 2.6 21.3l-53.2 63.4"/><path class="stroke" d="M163.4 85.5c5.2-6.2 13.8-8.3 20-3.1 6.2 5.2 6.2 13.8 1 20l-52.8 62.9c-27.3 32.5-73.9 38.4-104 13.1s-32.4-72.2-5.1-104.7L44 48.5c5.2-6.2 10.9-13.9 17-8.7s10.7 17.5 5.5 23.7L40.1 95.1l72.2-86c5.2-6.2 13.7-7.6 19.9-2.4 6.2 5.2 6.6 14.5 1.4 20.7"/></g></svg> </div> </div> </div>'),PULSE.app.templates.sidebar_video_item=_.template('<li class="sidebar-thumb <%= entitlementClass %>" tabindex="0"> <div class="sidebar-thumb__playing"> <%= PULSE.I18N.lookup( \'label.playing\' ) %> </div> <div class="sidebar-thumb__paused"> <%= PULSE.I18N.lookup( \'label.paused\' ) %> </div> <div class="sidebar-thumb__up-next"> <%= PULSE.I18N.lookup( \'label.upnext\' ) %> </div> <div class="sidebar-thumb__image"> <picture class="sidebar-thumb__picture"> <source srcset="<%= image.imageVariant %>, <%= image.imageVariantRetina %> 2x"> <img src="<%= image.imageVariant %>" alt="<%= title %>" class="sidebar-thumb__img"> </picture> <div class="sidebar-thumb__duration"> <span class="visually-hidden">${ cmsutil.i18n.lookup( \'label.duration\' ) }</span> <svg class="icon"> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#video-play"></use> </svg> <%= durationString %> </div> <div class="sidebar-thumb__play-icon"> <svg class="icon"> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#video-play"></use> </svg> </div> </div> <div class="sidebar-thumb__text"> <div class="sidebar-thumb__tag <%= tag ? \'\' : \'sidebar-thumb__tag--no-tag\' %>"> <span class="sidebar-thumb__tag-name"><%= tag %></span> <span class="sidebar-thumb__views"> <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#views"></use></svg> <span class="sidebar-thumb__view-count"> <%= views %> </span> <%= PULSE.I18N.lookup( \'label.views\' ) %> </span> </div> <h2 class="sidebar-thumb__title"> <% if ( subtitle ) { %> <%= subtitle %> <% } else { %> <%= title %> <% } %> </h2> <% if( entitlementClass ) { %> <div class="sidebar-thumb__entitlement sidebar-thumb__entitlement--fans"> <svg class="icon sidebar-thumb__entitlement-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#barca-fans-en"></use></svg> </div> <% } %> </div> </li>'),PULSE.app.templates.video_description_meta=_.template('<li class="video-meta video-meta--fade-icon video-meta--visible"> <div class="video-meta__icon-container"> <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#views"></use></svg> </div> <div class="video-meta__text-container"> <h2 class="video-meta__value"><%= views %></h2> <h3 class="video-meta__title"><%= PULSE.I18N.lookup( \'label.views\' ) %></h3> </div> </li> <li class="video-meta video-meta--divider" data-widget="forca-barca" data-ready-class="video-meta--visible" data-reaction-type="VIDEO" data-reaction-id="<%= video.id %>" data-analytics-label="<%= video.title %>"> <div class="video-meta__text-container"> <div class="força-barça força-barça--dark js-forca-barca"> <div class="força-barça__label-wrapper"> <div class="força-barça__labels"> <div class="força-barça__title"><%= PULSE.I18N.lookup( \'label.forca-barca\' ) %></div> <div class="força-barça__section"> <svg class="icon max-claps-fire-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#fire"></use></svg> <div class="força-barça__counter js-forca-barca-counter"></div> </div> </div> </div> <div class="força-barça__icon js-forca-barca-button" role="button" tabindex="0"> <span class="visually-hidden"><%= PULSE.I18N.lookup( \'label.forca-barca\' ) %></span> <span class="clap-count-disc js-forca-clap-counter"></span> <span class="max-clap-total js-forca-max-clap-total"></span> <svg class="icon hand-icon hand-icon--top" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 191.7 197.6"><path class="fill" d="M111.7 9.1c5.2-6.2 13-6.9 19.2-1.7 6.2 5.2 7.8 13 2.6 19.2L146.6 11c5.2-6.2 14.4-7 20.6-1.8 6.2 5.2 7 14.4 1.8 20.6l-12.5 14.9c5.2-6.2 14.6-6.1 20.8-.9 6.2 5.2 7.8 15.1 2.6 21.3l-16.5 19.6c5.2-6.2 13.8-8.3 20-3.1 6.2 5.2 6.2 13.8 1 20l-52.8 62.9c-27.3 32.5-73.9 38.4-104 13.1s-32.4-72.2-5.1-104.7l21.4-25.3c5.2-6.2 10.9-13.9 17-8.7s10.7 17.5 5.5 23.7l45.3-53.5z" fill="#fff"/><g class="stroke" fill="none" stroke="#ce202c" stroke-width="9" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"><path class="stroke" d="M80 91.1l66.5-79.3c5.2-6.2 14.4-7 20.6-1.8s7 14.4 1.8 20.6l-66.5 79.3M156.5 45.5c5.2-6.2 14.6-6.1 20.8-.9 6.2 5.2 7.8 15.1 2.6 21.3l-53.2 63.4"/><path class="stroke" d="M163.4 85.5c5.2-6.2 13.8-8.3 20-3.1 6.2 5.2 6.2 13.8 1 20l-52.8 62.9c-27.3 32.5-73.9 38.4-104 13.1s-32.4-72.2-5.1-104.7L44 48.5c5.2-6.2 10.9-13.9 17-8.7s10.7 17.5 5.5 23.7L40.1 95.1l72.2-86c5.2-6.2 13.7-7.6 19.9-2.4 6.2 5.2 6.6 14.5 1.4 20.7"/></g></svg> <svg class="icon hand-icon hand-icon--bottom" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 191.7 197.6"><path class="fill" d="M111.7 9.1c5.2-6.2 13-6.9 19.2-1.7 6.2 5.2 7.8 13 2.6 19.2L146.6 11c5.2-6.2 14.4-7 20.6-1.8 6.2 5.2 7 14.4 1.8 20.6l-12.5 14.9c5.2-6.2 14.6-6.1 20.8-.9 6.2 5.2 7.8 15.1 2.6 21.3l-16.5 19.6c5.2-6.2 13.8-8.3 20-3.1 6.2 5.2 6.2 13.8 1 20l-52.8 62.9c-27.3 32.5-73.9 38.4-104 13.1s-32.4-72.2-5.1-104.7l21.4-25.3c5.2-6.2 10.9-13.9 17-8.7s10.7 17.5 5.5 23.7l45.3-53.5z" fill="#fff"/><g class="stroke" fill="none" stroke="#ce202c" stroke-width="9" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"><path class="stroke" d="M80 91.1l66.5-79.3c5.2-6.2 14.4-7 20.6-1.8s7 14.4 1.8 20.6l-66.5 79.3M156.5 45.5c5.2-6.2 14.6-6.1 20.8-.9 6.2 5.2 7.8 15.1 2.6 21.3l-53.2 63.4"/><path class="stroke" d="M163.4 85.5c5.2-6.2 13.8-8.3 20-3.1 6.2 5.2 6.2 13.8 1 20l-52.8 62.9c-27.3 32.5-73.9 38.4-104 13.1s-32.4-72.2-5.1-104.7L44 48.5c5.2-6.2 10.9-13.9 17-8.7s10.7 17.5 5.5 23.7L40.1 95.1l72.2-86c5.2-6.2 13.7-7.6 19.9-2.4 6.2 5.2 6.6 14.5 1.4 20.7"/></g></svg> </div> </div> </div> </li>'),PULSE.app.templates.video_description_text=_.template('<span class="video-description__video-info video-description__video-info--mobile"> <% if( contentTag ) { %> <span class="video-description__tag"> <%= PULSE.I18N.lookup( contentTag ) %> </span> <% } %> <span class="video-description__duration"> <span class="visually-hidden">${ cmsutil.i18n.lookup( \'label.duration\' ) }</span> <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#video-play"></use></svg> <%= durationString %> </span> <span class="video-description__divider"></span> <time class="video-description__published"> <span class="visually-hidden">${ cmsutil.i18n.lookup( \'label.published\' ) }</span> <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#clock"></use></svg> <%= timeAgo %> </time> <span class="video-description__mobile-views"> <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#views"></use></svg> <h2 class="video-meta__value"><%= views %></h2> <h3 class="video-meta__title"><%= PULSE.I18N.lookup( \'label.views\' ) %></h3> </span> </span> <h1 class="video-description__title"><%= title %></h1> <p class="video-description__description"><%= description %></p> <span class="video-description__video-info"> <% if( contentTag ) { %> <span class="video-description__tag"> <%= PULSE.I18N.lookup( contentTag ) %> </span> <% } %> <span class="video-description__duration"> <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#video-play"></use></svg> <%= durationString %> </span> <span class="video-description__divider"></span> <time class="video-description__published"> <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#clock"></use></svg> <%= timeAgo %> </time> </span>'),PULSE.app.templates.video_next_up=_.template('<h1 class="video-sidebar__subtitle"> <%= PULSE.I18N.lookup( \'label.upnext\' ) %></h1> <section class="next-up js-next-up"> <div class="next-up__background"> <picture class="next-up__picture"> <source srcset="<%= image.imageVariant %>, <%= image.imageVariantRetina %> 2x"> <img src="<%= image.imageVariant %>" alt="<%= title %>" class="next-up__background-image"> </picture> </div> <div class="next-up__text"> <span class="next-up__duration"> <span class="visually-hidden">${ cmsutil.i18n.lookup( \'label.duration\' ) }</span> <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#video-play"></use></svg> <%= durationString %> </span> <p class="next-up__meta"> <% if( tag ) { %> <span class="next-up__tag"> <%= PULSE.I18N.lookup( tag ) %> </span> <% } %> <span class="next-up__views"> <svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#views"></use></svg> <span class="next-up__views-count"> <%= views %> </span> <%= PULSE.I18N.lookup( \'label.views\' ) %> </span> </p> <h2 class="next-up__title"> <% if ( subtitle ) { %> <%= subtitle %> <% } else { %> <%= title %> <% } %> </h2> </div> <div class="next-up__play-icon"> <svg class="icon"> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#video-play"></use> </svg> </div> </section>'),PULSE.app.templates["video-error-general"]=_.template('<div class="video-error"> <div class="video-error__icon"> <svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#exclamation"></use></svg> </div> <h2 class="video-error__heading"><%= PULSE.I18N.lookup(\'label.account.failed\') %></h2> </div>'),PULSE.app.templates["video-error-network"]=_.template("<h1>Network Error</h1>"),PULSE.app.templates["video-error-register"]=_.template('<div class="video-overlay"> <div class="video-overlay__content"> <h2 class="video-overlay__title"><%= PULSE.I18N.lookup(\'label.entitlement.register-barca-fan\') %></h2> <div class="video-overlay__description"><%= PULSE.I18N.lookup(\'label.entitlement.barca-fan-description\') %></div> <div class="video-overlay__info-container"> <div class="video-overlay__info"> <svg class="video-overlay__info-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#video-full"></use></svg> <div class="video-overlay__info-title"><%= PULSE.I18N.lookup(\'label.entitlement.fan-benefit-title-1\') %></div> <div class="video-overlay__info-description"><%= PULSE.I18N.lookup(\'label.entitlement.fan-benefit-description-1\') %></div> </div> <div class="video-overlay__info"> <svg class="video-overlay__info-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#rosette"></use></svg> <div class="video-overlay__info-title"><%= PULSE.I18N.lookup(\'label.entitlement.fan-benefit-title-2\') %></div> <div class="video-overlay__info-description"><%= PULSE.I18N.lookup(\'label.entitlement.fan-benefit-description-2\') %></div> </div> <div class="video-overlay__info"> <svg class="video-overlay__info-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#newsletter"></use></svg> <div class="video-overlay__info-title"><%= PULSE.I18N.lookup(\'label.entitlement.fan-benefit-title-3\') %></div> <div class="video-overlay__info-description"><%= PULSE.I18N.lookup(\'label.entitlement.fan-benefit-description-3\') %></div> </div> </div> <div class="video-overlay__cta"> <button class="button button--secondary button--large video-overlay__register js-overlay-register-btn" data-analytics="true" data-analytics-type="registre" data-analytics-section="registre-boto" data-analytics-event="barça fans contingut"> <%= PULSE.I18N.lookup(\'label.register-for-free\') %> </button> <div class="video-overlay__separator"><span><%= PULSE.I18N.lookup(\'label.or\') %></span></div> <span class="video-overlay__already-registered"><%= PULSE.I18N.lookup(\'label.already-registered-login\') %></span> <button class="button button--primary button--large video-overlay__login js-overlay-login-btn" data-analytics="true" data-analytics-type="login" data-analytics-section="login-boto" data-analytics-event="barça fans contingut"> <%= PULSE.I18N.lookup(\'label.login\') %> </button> </div> </div> </div>'),PULSE.app.templates["video-error-subscribe"]=_.template('<div class="video-overlay video-overlay--premium"> <div class="video-overlay__sidebar"> <div class="video-overlay__sidebar-bg"></div> <span class="u-screen-reader"><%= PULSE.I18N.lookup(\'label.barca-fans\') %></span> <div class="video-overlay__sidebar-premium"> <svg class="video-overlay__sidebar-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#fcbarcelona"></use></svg> <svg class="video-overlay__sidebar-premium-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#premium-en"></use></svg> </div> </div> <div class="video-overlay__content"> <h2 class="video-overlay__title"><%= PULSE.I18N.lookup(\'label.entitlement.subscribe-to-watch\') %></h2> <div class="video-overlay__description"><%= PULSE.I18N.lookup(\'label.entitlement.subscribe-to-watch\') %></div> <div class="video-overlay__info-container"> <div class="video-overlay__info"> <svg class="video-overlay__info-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#video-full"></use></svg> <div class="video-overlay__info-title"><%= PULSE.I18N.lookup(\'label.entitlement.premium-benefit-title-1\') %></div> <div class="video-overlay__info-description"><%= PULSE.I18N.lookup(\'label.entitlement.premium-benefit-description-1\') %></div> </div> <div class="video-overlay__info"> <svg class="video-overlay__info-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#rosette"></use></svg> <div class="video-overlay__info-title"><%= PULSE.I18N.lookup(\'label.entitlement.premium-benefit-title-2\') %></div> <div class="video-overlay__info-description"><%= PULSE.I18N.lookup(\'label.entitlement.premium-benefit-description-2\') %></div> </div> <div class="video-overlay__info"> <svg class="video-overlay__info-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#newsletter"></use></svg> <div class="video-overlay__info-title"><%= PULSE.I18N.lookup(\'label.entitlement.premium-benefit-title-3\') %></div> <div class="video-overlay__info-description"><%= PULSE.I18N.lookup(\'label.entitlement.premium-benefit-description-3\') %></div> </div> </div> <div class="video-overlay__cta"> <div class="video-overlay__subscribe"> <a href="<%= URL_HELPER.getSubscribeUrl() %>" class="button button--vip-tickets-on-dark button--large video-overlay__register"> <span class="video-overlay__sub-desktop"><%= PULSE.I18N.lookup(\'label.entitlement.subscribe-price-monthly\') %></span> <span class="video-overlay__sub-mobile"><%= PULSE.I18N.lookup(\'label.entitlement.subscribe-price-monthly.short\') %></span> </a> <div class="video-overlay__payment"> <svg class="video-overlay__payment-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#visa"></use></svg> <svg class="video-overlay__payment-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/resources/<%= window.RESOURCE_VERSION %>/i/svg-output/icn.svg#mastercard"></use></svg> </div> </div> <% if (!USER_HELPER.getUserAccount()) { %> <div class="video-overlay__separator"><span><%= PULSE.I18N.lookup(\'label.or\') %></span></div> <div class="video-overlay__login-container"> <span class="video-overlay__already-registered"><%= PULSE.I18N.lookup(\'label.already-registered-login\') %></span> <a href="<%= URL_HELPER.getLoginUrl(PULSE.app.language) %>" class="button button--primary button--large video-overlay__login js-overlay-login-btn"><%= PULSE.I18N.lookup(\'label.login\') %></a> </div> <% } %> </div> </div> </div>'),function(e){var t=function(){var t=this,i=document.createElement("script");i.src=URL_HELPER.getStreamAMGScriptUrl(e.environment.streamAMG.partnerId,e.environment.streamAMG.uiConfigs["default"]),i.type="text/javascript",i.onload=function(){t.scriptLoaded=!0,t.readyCallbacks.forEach(function(e){return e()})},document.body.appendChild(i)};e.VideoPlayerManager=function(){var e=this;e.players=[],e.readyCallbacks=[],e.scriptLoaded=!1,t.call(e)},e.VideoPlayerManager.prototype.onKDPReady=function(e,t){var i=this;return i.players.push(t),i.scriptLoaded?e():void i.readyCallbacks.push(e)},e.VideoPlayerManager.prototype.stopOtherPlayers=function(e){var t=this;t.players.forEach(function(t){if(t!==e){var i=t.getPlayerElement();i&&i.sendNotification(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.PAUSE),"function"==typeof t.hideMiniPlayer&&t.hideMiniPlayer()}})},e.PlayerManager=e.PlayerManager||new e.VideoPlayerManager}(PULSE.app);var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e};!function(e,t,i,a,n){var o,l={NOT_SUBSCRIBED:"SUBSCRIBE_ERROR",NOT_REGISTERED:"REGISTER_ERROR",NETWORK_ERROR:"NETWORK_ERROR"},s=(o={},_defineProperty(o,l.NOT_REGISTERED,"video-error-register"),_defineProperty(o,l.NOT_SUBSCRIBED,"video-error-subscribe"),_defineProperty(o,l.NETWORK_ERROR,"video-error-network"),_defineProperty(o,"GENERAL","video-error-general"),o),r="js-footer",d="js-overlay-login-btn",c="js-overlay-register-btn",v="video-player__wrap--error-overlay",u="a",p="data-external-id",E=2,m=.25,_=.5,g=.75,f="No informat",S=!1,b=!1,y=!1,h=function(){var e=this;e.keyEventCallback=A.bind(this),document.addEventListener("keyup",e.keyEventCallback)},P=function(){var e=this;window.kWidget&&e.config.entry_id&&(window.kWidget.destroy(e.config.targetId),window.kWidget.embed(e.config))},L=function(t,i){var a=this,n=t.getAttribute("data-plugins").split(",").reduce(function(e,t){return e[t]={plugin:!0},e},{}),o="development"!==e.environment.label,l={entry_id:t.getAttribute(p),flashvars:_extends({},n,{autoPlay:a.autoPlay,"audioSelector.defaultLang":(PULSE.app.language||e.defaultLanguage).toLowerCase(),"EmbedPlayer.WebKitPlaysInline":!0,IframeCustomPluginJs1:o?e.environment.cdn+"widgets/fcb_player-plugins.min.js":e.environment.cdn+"widgets/fcb_player-plugins.js",IframeCustomPluginCss1:o?e.environment.cdn+"styles/amg-plugins.min.css":e.environment.cdn+"styles/amg-plugins.css",mobileAutoPlay:a.autoPlay,streamerType:"auto",ks:i}),readyCallback:a.playerReady.bind(a),targetId:t.getAttribute("data-id"),uiconf_id:e.environment.streamAMG.uiConfigs[t.getAttribute("data-player-name")],wid:"_"+e.environment.streamAMG.partnerId};return t.dataset.thumbnailUrl&&(l.flashvars.thumbnailUrl=N(t)),l},T=function(t){var i=USER_HELPER.getUserAccount();return e.environment.tokenApi+"/"+t+URL_HELPER.prepareParams({memberUuid:i?i.username:"",accessToken:USER_HELPER.getUserAccessToken(),lang:e.language})},A=function(e){var t=this;e.keyCode===CONSTANTS.KEY_CODES.ESCAPE&&t.playerElement.contains(e.target)&&(e.stopImmediatePropagation(),t.playerElement.closest("[tabindex]").focus())},N=function(e){var t=e.dataset.thumbnailUrl.split("?");return t[0]+"?width="+e.offsetWidth+"&height="+e.offsetHeight},I=function(e){var i=this,a=s[e]||s.GENERAL,n=i.element.querySelector("#"+i.element.getAttribute("data-id"));n.innerHTML=TEMPLATE_HELPER.render({},a),t.style.addClass(n.parentNode,v);var o=n.querySelector("."+d),l=n.querySelector("."+c);o&&A11Y_HELPER.addListener(o,function(e){e.preventDefault(),USER_HELPER.logIn()}),l&&A11Y_HELPER.addListener(l,function(e){e.preventDefault(),USER_HELPER.register()});var r=i.element.querySelectorAll('[data-analytics="true"]');r.length>0&&"undefined"!=typeof ANALYTICS_HELPER&&ANALYTICS_HELPER.addEventListeners(r)},w=function(e){return new Promise(function(t,i){axios.get(T(e),{withCredentials:!0}).then(function(e){t(e.data.ks)})["catch"](function(e){i(e)})})},O=function(e){var t=this;w(e.id).then(function(o){var l=e.mediaId,s=e.id;t.config=L.call(t,t.element,o),t.config.entry_id=l,P.call(t),n.contentTracker(!1,CONSTANTS.CONTENT_TRACKER.ACTION.VIEW,CONSTANTS.CONTENT_TRACKER.TYPE.VIDEO,s),i.getState().activeVideo.playState!==CONSTANTS.VIDEO_PLAY_STATE.PLAYING&&(i.dispatch(a.ActiveVideo.setPlayState(CONSTANTS.VIDEO_PLAY_STATE.LOADING)),i.dispatch(a.ActiveVideo.setCurrentTime(0)))})["catch"](function(e){var i=e.response?e.response.data.error:e;I.call(t,i)})},R=function(e){var t=this,i="undefined"!=typeof fcbDL&&fcbDL.hasOwnProperty("video"),a=i||t.embedAnalyticsModel;if("undefined"!=typeof fcbDL&&"undefined"!=typeof _satellite&&a){if("pause"===e){var n=Math.round(t.playerElement.evaluate("{video.player.currentTime}")),o=Math.round(t.playerElement.evaluate("{duration}"));if(n>=o-1)return}var l={};if(t.embedAnalyticsModel){var s=0;"first play"!==e&&(s=t.timeSinceLastEvent),t.timeSinceLastEvent=0,l={videoEvent:e,videoTime:s,videoName:t.embedAnalyticsModel.videoName,videoId:t.embedAnalyticsModel.videoId,videoAudio:t.embedAnalyticsModel.videoAudio,videoDuracio:t.embedAnalyticsModel.videoDuracio,videoStreaming:t.embedAnalyticsModel.videoStreaming,videoPlayerQuality:t.embedAnalyticsModel.videoPlayerQuality,videoSuscripcio:t.embedAnalyticsModel.videoSuscripcio,videoDataEvent:t.embedAnalyticsModel.videoDataEvent,videoDataPublicacio:t.embedAnalyticsModel.videoDataPublicacio,videoDiesDesdePublicacio:t.embedAnalyticsModel.videoDiesDesdePublicacio,videoRelacionat:t.embedAnalyticsModel.videoRelacionat,videoCompeticio:t.embedAnalyticsModel.videoCompeticio,videoTemporada:t.embedAnalyticsModel.videoTemporada,videoCategoria:t.embedAnalyticsModel.videoCategoria}}else"first play"===e?fcbDL.video.time=0:fcbDL.video.time=t.timeSinceLastEvent,fcbDL.video.event=e,t.timeSinceLastEvent=0,l={videoEvent:e,videoTime:fcbDL.video.time,videoName:fcbDL.video.name,videoId:fcbDL.video.id,videoAudio:fcbDL.video.audio,videoDuracio:fcbDL.video.duracio,videoStreaming:fcbDL.video.streaming,videoPlayerQuality:fcbDL.video.playerQuality,videoSuscripcio:fcbDL.video.suscripcio,videoDataEvent:fcbDL.video.dataEvent,videoDataPublicacio:fcbDL.video.dataPublicacio,videoDiesDesdePublicacio:fcbDL.video.diesDesdePublicacio,videoRelacionat:fcbDL.video.relacionat,videoCompeticio:fcbDL.video.competicio,videoTemporada:fcbDL.video.temporada,videoCategoria:fcbDL.video.categoria};_satellite.setVar(l),_satellite.track("scVideo"),l={}}},V=function(e,t){DOM_HELPER.nodeListToArray(e).forEach(function(e){e.setAttribute("tabindex",t)})},k=function(){var e=this,t=watch(i.getState,["activeVideo","data"]);i.subscribe(t(function(t,i){t!==!1&&t.mediaId!==i.mediaId?O.call(e,t):t===!1&&window.kWidget.destroy(e.config.targetId),t!==!1&&t.title!==i.title&&(e.videoDuration=t.duration,e.liveStreaming=!!(t.tags&&t.tags.length>0)&&D(t.tags),"undefined"!=typeof ANALYTICS_HELPER&&x(t,e.playerElement))}))},D=function(e){return!!e.find(function(e){return e.label===CONSTANTS.TAGS.LIVE_STREAMING})},C=function(e){i.dispatch(a.ActiveVideo.setActiveVideo(e))},x=function(t){var a=void 0;a=!!(t.tags&&t.tags.length>0)&&t.tags.filter(function(e){return CONSTANTS.TAGS.MATCH_REPLAYS.includes(e.label)}).length>0;var n={title:t.title||"",id:t.id,duration:t.duration,isMatchesView:a,language:e.language||e.defaultLanguage,lastModified:t.lastModified,publishFrom:t.publishFrom,references:t.references,tags:t.tags,viaRelatedContent:i.getState().activeVideo.fromRelated};fcbDL=ANALYTICS_HELPER.generateVideoDataLayer(n,!0)},U=function(){var e=this,t=Math.round(e.playerElement.evaluate("{video.player.currentTime}"));if(i.dispatch(a.ActiveVideo.setCurrentTime(t)),e.liveStreaming)e.timeSinceLastEvent>=CONSTANTS.TIME.TEN_MINS_IN_SECS&&R.call(e,"streaming");else{var n=Math.round(e.videoDuration*m),o=Math.round(e.videoDuration*_),l=Math.round(e.videoDuration*g);n&&t!==n&&(S=!1),o&&t!==o&&(b=!1),l&&t!==l&&(y=!1),t!==n||S?t!==o||b?t!==l||y||(R.call(e,"segment3"),M.call(e,"75%"),y=!0):(R.call(e,"segment2"),M.call(e,"50%"),b=!0):(R.call(e,"segment1"),M.call(e,"25%"),S=!0)}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0%",t=this;"undefined"!=typeof VIDEO_PERSONALISATION_ENABLED&&"true"===VIDEO_PERSONALISATION_ENABLED&&"undefined"!=typeof _satellite&&n.personalisation.trackEvent({eventType:CONSTANTS.TRACK_PERSONALISE_EVENTS.VIDEO_PLAYED,eventValue:e,userId:_satellite.getVisitorId().getMarketingCloudVisitorID(),itemId:fcbDL&&fcbDL.video&&fcbDL.video.id?fcbDL.video.id:t.initialIds.id,metadata:{title:fcbDL&&fcbDL.video&&fcbDL.video.name?fcbDL.video.name:"N/A",videoTime:t.videoDuration}})};e.VideoPlayer=function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;e.PlayerManager.onKDPReady(function(){a.init(t,i),k.call(a),a.initialIds.id&&C(a.initialIds),V(document.querySelectorAll("."+r+" "+u),E),(BROWSER_HELPER.isIE()||BROWSER_HELPER.isEdge())&&h.call(a)},this)},e.VideoPlayer.prototype.init=function(e,t,i){var a=this;a.element=e,a.autoPlay=t,a.embedAnalyticsModel=i,a.timeSinceLastEvent=0,a.eventTimer=null,a.blockPlaylist=a.element.getAttribute("data-block-playlist"),a.isEmbedded=!1,a.playerInstance=!1,a.initialIds={id:a.element.getAttribute(CONSTANTS.ATTR.PULSE_CONTENT_ID),mediaId:a.element.getAttribute(p)}},e.VideoPlayer.prototype.playerReady=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this;if(s.isEmbedded=l,s.isEmbedded&&(s.videoDuration=o,s.liveStreaming=!1),s.playerElement=document.getElementById(t),s.blockPlaylist&&i.dispatch(a.ActiveVideo.setContinuousPlay(!1)),s.playerElement.kBind(CONSTANTS.EVENT.CINEMA_MODE.CLICKED,function(){e.videoLayoutInstance.toggleCinema()}),s.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.FIRST_PLAY,function(){R.call(s,"first play"),M.call(s,"0%")}),s.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.PLAYED,function(){s.eventTimer||(s.eventTimer=setInterval(function(){s.timeSinceLastEvent++},CONSTANTS.TIME.ONE_SECOND))}),s.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.CLOSE_FULL_SCREEN,function(){s.playerElement.sendNotification(CONSTANTS.EVENT.CINEMA_MODE.SHOW),BROWSER_HELPER.isIE()||BROWSER_HELPER.isEdge()||s.playerElement.closest("[tabindex]").focus()}),s.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.OPEN_FULL_SCREEN,function(){s.playerElement.sendNotification(CONSTANTS.EVENT.CINEMA_MODE.HIDE)}),s.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.PLAY_END,function(){R.call(s,"complete"),M.call(s,"100%"),i.getState().activeVideo.autoplay&&i.dispatch(a.ActiveVideo.setFromRelated(!1)),i.dispatch(a.ActiveVideo.setPlayState(CONSTANTS.VIDEO_PLAY_STATE.ENDED))}),s.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.PAUSED,function(){i.dispatch(a.ActiveVideo.setPlayState(CONSTANTS.VIDEO_PLAY_STATE.PAUSED)),R.call(s,"pause"),clearInterval(s.eventTimer),s.eventTimer=null}),s.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.REPLAY,function(){R.call(s,"first play")}),s.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.UPDATE_PLAY_HEAD,U.bind(s)),s.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.SEEKED,U.bind(s)),"undefined"!=typeof VIDEO_PERSONALISATION_ENABLED&&"true"===VIDEO_PERSONALISATION_ENABLED&&"undefined"!=typeof _satellite&&!s.isEmbedded){var r=null;"undefined"!=typeof i.getState().activeVideo.data.personalisationExperiment&&(r=i.getState().activeVideo.data.personalisationExperiment),n.personalisation.trackEvent({eventType:CONSTANTS.TRACK_PERSONALISE_EVENTS.VIDEO_LOADED,eventValue:"true",userId:_satellite.getVisitorId().getMarketingCloudVisitorID(),itemId:fcbDL&&fcbDL.video&&fcbDL.video.id?fcbDL.video.id:s.initialIds.id,metadata:{title:fcbDL&&fcbDL.video&&fcbDL.video.name?fcbDL.video.name:"N/A"},experimentName:r,rankedItems:n.personalisation.rankedItems})}},e.VideoPlayer.prototype.getPlayerElement=function(){var e=this;return e.playerElement},e.VideoPlayer.prototype.playVideoWithId=function(e){var t=this;O.call(t,e)};for(var H=document.querySelectorAll('[data-widget="video-player"]'),B=0;B<H.length;B++)"true"!==H[B].getAttribute("data-init")&&(new e.VideoPlayer(H[B],(!0)),
H[B].setAttribute("data-init","true"))}(PULSE.app,PULSE.core,PULSE.store,PULSE.app.actions,PULSE.app.common);var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e};!function(e,t,i,a,n){var o="js-video-thumbnail",l="js-open-share",s="js-forca-barca-button",r="js-modal-content",d="video-modal--expanded",c=function(){var e=this;["button","a","li","input","."+l,"."+s,"."+r].forEach(function(t){A11Y_HELPER.toggleZIndex(e.container,t)})},v=function(){var e=this;t.dispatch(i.ActiveVideo.setActiveVideo(!1)),n.style.removeClass(e.container,d),e.browserButtonUsed||history.pushState(_extends({},history.state,{video:{}}),e.prevTitle,e.prevUrl),e.browserButtonUsed=!1},u=function(){var e=this,a=e.modal.thumbElement.dataset.title;e.browserButtonUsed||(e.id=e.modal.thumbElement.dataset.pulseId,e.mediaId=e.modal.thumbElement.dataset.externalId,e.sourcePlaylist=e.modal.thumbElement.getAttribute(CONSTANTS.ATTR.PLAYLIST_ID)),t.dispatch(i.ActiveVideo.setActiveVideo({id:e.id,mediaId:e.mediaId,sourcePlaylist:e.sourcePlaylist})),n.style.addClass(e.container,d),e.browserButtonUsed||VIDEO_HELPER.pushState({id:e.id,mediaId:e.mediaId,sourcePlaylist:e.sourcePlaylist,modal:!0,popBy:CONSTANTS.STATE_POP_BY.VIDEO_MODAL},a),e.browserButtonUsed=!1,"undefined"!=typeof fcbDL&&(fcbDL.contingut.pageName=URL_HELPER.generateUrl("video",e.id,!1,a,"https"),_satellite.track("scVPage"))},p=function(e){var t=this;e.state.video.modal||(t.browserButtonUsed=!0,t.modal.closeModal()),e.state.video.popBy===CONSTANTS.STATE_POP_BY.VIDEO_MODAL&&(t.browserButtonUsed=!0,t.id=e.state.video.id,t.mediaId=e.state.video.sourcePlaylist,t.sourcePlaylist=e.state.video.vourcePlaylist,t.modal.openModal(!1))};e.VideoModal=function(e){var t=this;t.container=e,t.prevUrl=window.location.href,t.prevTitle=document.title,t.browserButtonUsed=!1,t.component={content:t.container.querySelector("."+r)},c.call(t),t.modal=new a.Modal({closeCallback:v.bind(t),items:document.querySelectorAll("."+o),openCallback:u.bind(t),wrap:t.container}),window.addEventListener("popstate",p.bind(t))};var E=document.querySelector('[data-widget="video-modal"]');E&&"true"!==E.getAttribute("data-init")&&(a.videoModal=new e.VideoModal(E),E.setAttribute("data-init","true"))}(PULSE.app,PULSE.store,PULSE.app.actions,PULSE.app.common,PULSE.core);var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e};!function(e,t,i,a){var n="video-share--active",o="video-description__open-share--active",l="js-open-share",s="js-video-share",r="js-share-checkbox",d="js-video-time",c="js-social-show-text",v="js-description-text",u="js-description-meta",p="js-mobile-forca",E={template:{text:"video_description_text",meta:"video_description_meta"}},m=function(e){var t=this,i=VIDEO_HELPER.renderViews(e.views);t.componentElement.text.innerHTML=TEMPLATE_HELPER.render({contentTag:TEMPLATE_HELPER.getContentTag(e.tags),description:e.description,durationString:VIDEO_HELPER.formatDuration(VIDEO_HELPER.parseDuration(e.duration)),timeAgo:TEMPLATE_HELPER.wrapInteger(moment(e.publishFrom).fromNow(),"video-description__published-time"),title:e.title,views:i},t.config.template.text),t.componentElement.meta.innerHTML=TEMPLATE_HELPER.render({forcaCount:"100",views:i,video:e},t.config.template.meta),t.componentElement.mobileForca.innerHTML=TEMPLATE_HELPER.render({id:e.id,title:e.title},"forca-button"),S(t.element)},_=function(e,t){var i=this,a=URL_HELPER.generateUrl("videos",i.id,!1,t,"https",i.tags);i.componentElement.shareTimeCheckbox.checked&&(a+=URL_HELPER.prepareParams({time:e})),i.updateUrl&&(i.componentElement.urlField.innerHTML=a),i.component.pageShare.setUrl(a)},g=function(e){var t=this,i=VIDEO_HELPER.parseDuration(e);t.componentElement.videoTime.innerText=VIDEO_HELPER.formatDuration(i)},f=function(){var e=this;A11Y_HELPER.addListener(e.componentElement.openShareButton,function(){e.componentElement.openShareButton.blur(),A11Y_HELPER.toggleZIndex(e.componentElement.shareContainer,"li"),A11Y_HELPER.toggleZIndex(e.componentElement.shareContainer,"input"),t.style.toggleClass(e.componentElement.shareContainer,n),t.style.toggleClass(e.componentElement.openShareButton,o)}),e.componentElement.shareTimeCheckbox.addEventListener("change",function(){_.call(e,a.getState().activeVideo.currentTime,a.getState().activeVideo.data.title),e.componentElement.shareTimeCheckbox.checked||e.componentElement.shareTimeCheckbox.blur()}),e.componentElement.urlField.addEventListener("mouseenter",function(){e.updateUrl=!1}),e.componentElement.urlField.addEventListener("mouseleave",function(){e.updateUrl=!0})},S=function(e){var t=DOM_HELPER.nodeListToArray(e.querySelectorAll('[data-widget="forca-barca"]'));t.forEach(function(e){e&&!e.dataset.init&&(e.dataset.init=!0,new i.ForcaBarca(e))})};e.VideoDescription=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;n.element=e,n.config=_extends({},E,t),n.updateUrl=!0,n.id=n.element.getAttribute(CONSTANTS.ATTR.PULSE_CONTENT_ID)||!1;var o=n.element.getAttribute("data-tags")||"";n.tags=o.split(","),n.componentElement={openShareButton:n.element.querySelector("."+l),shareContainer:n.element.querySelector("."+s),shareTimeCheckbox:n.element.querySelector("."+r),videoTime:n.element.querySelector("."+d),urlField:n.element.querySelector("."+c),text:n.element.querySelector("."+v),meta:n.element.querySelector("."+u),mobileForca:n.element.querySelector("."+p)},S(n.element),n.component={pageShare:new i.PageShare(n.componentElement.shareContainer)},f.call(n),n.subscribe(n),_.call(n,"0:00",a.getState().activeVideo.data.title)},e.VideoDescription.prototype.onTimeUpdate=function(e){var t=this;g.call(t,e),_.call(t,e,a.getState().activeVideo.data.title)},e.VideoDescription.prototype.onVideoUpdate=function(e){var t=this;e&&(t.id=e.id,t.tags=e.tags,m.call(t,e))},e.VideoDescription.prototype.subscribe=function(){var e=this,t=watch(a.getState,["activeVideo","data"]);a.subscribe(t(function(t){e.onVideoUpdate(t)}));var i=watch(a.getState,["activeVideo","currentTime"]);a.subscribe(i(function(t){e.onTimeUpdate(t)}))};for(var b=document.querySelectorAll('[data-widget="video-description"]'),y=0;y<b.length;y++)"true"!==b[y].getAttribute("data-init")&&(new e.VideoDescription(b[y]),b[y].setAttribute("data-init","true"))}(PULSE.app,PULSE.core,PULSE.app.common,PULSE.store);var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e};!function(e,t){var i=function(){var e=document.createElement("div");return t.style.addClass(e,"loader"),e},a=function(){var e=this;SCREEN_HELPER.onDebouncedScroll(function(){if(e.enabled){var t=e.config.scrollingElement.scrollTop+e.config.scrollingElement.clientHeight,i=e.config.scrollingElement.scrollHeight-e.config.scrollMargin;t>=i&&(e.disable(),e.config.callback())}},e.config.scrollingElement)};e.InfiniteScroll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;t.config=_extends({},PRESET_CONFIG.INFINITE_SCROLL,e),t.enabled=!1,a.call(t),t.loader=i()},e.InfiniteScroll.prototype.enable=function(){var e=this;e.enabled=!0,e.loader.remove(),e.config.scrollingElement.appendChild(e.loader)},e.InfiniteScroll.prototype.disable=function(){var e=this;e.enabled=!1},e.InfiniteScroll.prototype.setPagination=function(e){var t=this;e.page+1<e.numPages?t.enable():t.disable()}}(PULSE.app,PULSE.core);var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e};!function(e,t,i,a){var n={template:"sidebar_video_item",stateClasses:{VIDEO_STATE_INACTIVE:[],VIDEO_STATE_PAUSED:["sidebar-thumb--paused"],VIDEO_STATE_PLAYING:["sidebar-thumb--playing"],VIDEO_STATE_LOADING:["sidebar-thumb--loading"],VIDEO_STATE_UP_NEXT:["sidebar-thumb--up-next"]},entitlementClasses:{PREMIUM:"sidebar-thumb--fans",FANS:"sidebar-thumb--fans",FREE:"sidebar-thumb--free"},imageVariant:"Thumbnail",imageVariantRetina:"Thumbnail (Retina)"},o=function(){var e=this,t=i.getState().activeVideo.data;if(!t||t.id.toString()!==e.data.id.toString()){var a=i.getState().activeVideo.nextVideo;return a&&a.id===e.data.id?CONSTANTS.VIDEO_PLAY_STATE.UP_NEXT:CONSTANTS.VIDEO_PLAY_STATE.INACTIVE}return i.getState().activeVideo.playState},l=function(){var e=this;Object.keys(e.config.stateClasses).forEach(function(i){var a=e.config.stateClasses[i];a.forEach(function(i){t.style.removeClass(e.element,i)})})},s=function(e){var i=this;l.call(i),i.config.stateClasses[e].forEach(function(e){t.style.addClass(i.element,e)})},r=function(){var e=this,t=watch(i.getState,["activeVideo","playState"]);i.subscribe(t(function(){var t=o.call(e);s.call(e,t)}));var a=watch(i.getState,["activeVideo","nextVideo"]);i.subscribe(a(function(){var t=o.call(e);s.call(e,t)}))},d=function(){var e=this;A11Y_HELPER.addListener(e.element,function(){i.dispatch(a.ActiveVideo.setFromRelated(!0)),i.dispatch(a.ActiveVideo.setActiveVideo(e.data))})},c=function(){for(var e=this,t=Object.keys(CONSTANTS.TAGS.ENTITLEMENT),i=0;i<t.length;i++){var a=t[i],n=CONSTANTS.TAGS.ENTITLEMENT[a];if(TEMPLATE_HELPER.contentHasTag(e.data.tags,n.tag))return e.config.entitlementClasses[a]}return""};e.SidebarVideoModel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this;i.data=e,i.element=!1,i.config=_extends({},n,t),r.call(i)},e.SidebarVideoModel.prototype.getElement=function(){var e=this;if(e.element)return e.element;var t=TEMPLATE_HELPER.render({entitlementClass:c.call(e),image:VIDEO_HELPER.getVariant(e.data,e.config.imageVariant,e.config.imageVariantRetina,e.data.thumbnailUrl),title:e.data.title,subtitle:e.data.subtitle||"",tag:PULSE.I18N.lookup(TEMPLATE_HELPER.getContentTag(e.data.tags)),durationString:VIDEO_HELPER.formatDuration(VIDEO_HELPER.parseDuration(e.data.duration)),views:VIDEO_HELPER.renderViews(e.data.views)},e.config.template);return e.element=TEMPLATE_HELPER.stringToHtmlElement(t),s.call(e,o.call(e)),d.call(e),e.element},e.SidebarVideoModel.prototype.getId=function(){var e=this;return e.data.id}}(PULSE.app,PULSE.core,PULSE.store,PULSE.app.actions);var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e};!function(e,t,i,a,n){var o="js-next-up",l="js-next-up-container",s="js-video-list",r="js-running-time",d="js-auto-play",c=200,v="video-sidebar__next-up--hidden",u=[/^content-category-/,/^content-tag-/],p=["FOOTBALL_COMPSEASON","FOOTBALL_COMPETITION","FOOTBALL_TEAM","FOOTBALL_CLUB"],E={pageSize:25,page:0,sort:"desc"},m={template:{nextUp:"video_next_up"},imageVariant:"Thumbnail",imageVariantRetina:"Thumbnail (Retina)"},_="story",g=function(e){var t=this;e.state.video.id?e.state.video.popBy===CONSTANTS.STATE_POP_BY.VIDEO_SIDEBAR&&(t.browserButtonUsed=!0,O.call(t,e.state.video.id)):(t.browserButtonUsed=!0,O.call(t,t.initialId))},f=function(e){for(var t=0;t<u.length;t++)for(var i=u[t],a=0;a<e.length;a++){var n=e[a];if(i.test(n.label))return{tagNames:n.label}}return{}},S=function(e){for(var t=0;t<p.length;t++)for(var i=p[t],a=0;a<e.length;a++){var n=e[a];if(n.type===i)return{references:i+":"+n.id}}return{}},b=function(e){return _extends({},E,S(e.references),f(e.tags))},y=function(e,t){var i=this;e.forEach(function(e){e.id.toString()!==i.initialId&&T.call(i,_extends({},e,{personalisationExperiment:t}))})},h=function(e,t){var i=this,a={};"undefined"!=typeof VIDEO_PERSONALISATION_ENABLED&&"true"===VIDEO_PERSONALISATION_ENABLED&&"undefined"!=typeof _satellite&&(a=_defineProperty({},CONSTANTS.PERSONALISATION_USER_HEADER,_satellite.getVisitorId().getMarketingCloudVisitorID())),axios.get(e,{headers:a}).then(function(e){var a=e.data;y.call(i,a.content,e.headers[CONSTANTS.PERSONALISATION_HEADER]),i.infinteScroll.setPagination(a.pageInfo),i.showMore.setPagination(a.pageInfo),e.headers[CONSTANTS.PERSONALISATION_HEADER]===CONSTANTS.PERSONALISATION_EXPERIMENT?(a.content.length&&n.personalisation.storeRankedItems(a.content.map(function(e){return e.id})),"undefined"!=typeof ANALYTICS_HELPER&&ANALYTICS_HELPER.eventosDTM("personalization","relatedVideos","true")):"undefined"!=typeof ANALYTICS_HELPER&&ANALYTICS_HELPER.eventosDTM("personalization","relatedVideos","false"),x.call(i),t&&t()})["catch"](function(){console.warn("video sidebar: error fetching initial video data")})},P=function(e){var t=this;t.relatedParams=b(e);var i=URL_HELPER.generateAPIContentPath("video",!1,t.relatedParams);h.call(t,i,function(){var e=I.call(t);R.call(t,e)})},L=function(e){var t=this,i=URL_HELPER.generateAPIContentPath("playlist",e,{fullObjectResponse:!0});axios.get(i).then(function(e){return e.data}).then(function(e){return e.items.map(function(e){return e.response})}).then(function(e){y.call(t,e),x.call(t);var i=I.call(t);R.call(t,i)})},T=function(t){var i=this,a=new e.SidebarVideoModel(t);i.videoModels.push(a),i.componentElement.videoList.appendChild(a.getElement())},A=function(){var e=this;axios.get(URL_HELPER.generateAPIContentPath("video",e.initialId)).then(function(e){return e.data}).then(function(t){T.call(e,t),e.playlistId?L.call(e,e.playlistId):P.call(e,t),i.dispatch(a.ActiveVideo.setActiveVideo(t))})["catch"](function(){console.warn("video sidebar: error fetching initial video data")})},N=function(e){for(var t=this,i=0;i<t.videoModels.length;i++){var a=t.videoModels[i];if(a.getId().toString()===e.toString())return i}return-1},I=function(){var e=this,t=i.getState().activeVideo.data.id,a=N.call(e,t);return a!==-1&&e.videoModels[a+1]},w=function(){var e=this,t=I.call(e);t&&i.dispatch(a.ActiveVideo.setActiveVideo(t.data))},O=function(e){var t=this,n=N.call(t,e);if(n!==-1){var o=t.videoModels[n];i.dispatch(a.ActiveVideo.setActiveVideo(o.data))}},R=function(e){var n=this;if(n.componentElement.nextUp){if(!e)return void t.style.addClass(n.componentElement.nextUp,v);n.componentElement.nextUp.innerHTML=TEMPLATE_HELPER.render({image:VIDEO_HELPER.getVariant(e.data,n.config.imageVariant,n.config.imageVariantRetina,e.data.thumbnailUrl),title:e.data.title,subtitle:e.data.subtitle||"",tag:TEMPLATE_HELPER.getContentTag(e.data.tags),durationString:VIDEO_HELPER.formatDuration(VIDEO_HELPER.parseDuration(e.data.duration)),views:VIDEO_HELPER.renderViews(e.data.views)},n.config.template.nextUp),t.style.removeClass(n.componentElement.nextUp,v)}e&&(i.dispatch(a.ActiveVideo.setNextVideo(e.data)),A11Y_HELPER.addListener(n.element.querySelector("."+o),function(){i.dispatch(a.ActiveVideo.setFromRelated(!1)),w.call(n)}))},V=function(e){var t=3;return Object.keys(e).length<=t&&e.mediaId&&e.id},k=function(){var e=this;e.videoModels=[],e.componentElement.videoList.innerHTML=""},D=function(){var e=this,t=watch(i.getState,["activeVideo","playState"]);i.subscribe(t(function(t){t===CONSTANTS.VIDEO_PLAY_STATE.ENDED&&i.getState().activeVideo.autoplay&&i.getState().activeVideo.continuousPlay&&w.call(e)}));var a=watch(i.getState,["activeVideo","data"]);i.subscribe(a(function(t,i){if(t.mediaId!==i.mediaId&&t!==!1){if(V(t))return k.call(e),e.initialId=t.id,e.playlistId=t.sourcePlaylist,void A.call(e);var a=I.call(e);R.call(e,a),e.browserButtonUsed||VIDEO_HELPER.pushState({id:t.id,mediaId:t.mediaId,sourcePlaylist:t.sourcePlaylist,popBy:CONSTANTS.STATE_POP_BY.VIDEO_SIDEBAR},t.title),e.browserButtonUsed=!1}}))},C=function(){var e=this;e.componentElement.autoPlay.addEventListener("change",function(){i.dispatch(a.ActiveVideo.setAutoplay(e.componentElement.autoPlay.checked))})},x=function(){var e=this,t=e.videoModels.reduce(function(e,t){return e+t.data.duration},0);e.componentElement.runningTime.innerHTML=VIDEO_HELPER.formatDuration(VIDEO_HELPER.parseDuration(t))},U=function(){var e=this;e.relatedParams=_extends({},e.relatedParams,{page:e.relatedParams.page+1});var t=URL_HELPER.generateAPIContentPath("video",!1,e.relatedParams);h.call(e,t)};e.VideoSidebar=function(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this;window.addEventListener("popstate",g.bind(o)),o.element=i,o.config=_extends({},m,a),o.browserButtonUsed=!1,o.componentElement={nextUp:o.element.querySelector("."+l),videoList:o.element.querySelector("."+s),runningTime:o.element.querySelector("."+r),autoPlay:o.element.querySelector("."+d),showMore:o.element.querySelector("."+CONSTANTS.JS_CLS_NAMES.SHOW_MORE)},o.infinteScroll=new e.InfiniteScroll({scrollingElement:o.componentElement.videoList,scrollmargin:c,callback:U.bind(o)}),o.showMore=new n.ShowMore(o.componentElement.showMore,{callback:U.bind(o)}),o.videoModels=[],o.initialId=o.element.getAttribute(CONSTANTS.ATTR.PULSE_CONTENT_ID),o.playlistId=t.url.getParam(_),D.call(o),C.call(o)};for(var M=document.querySelectorAll('[data-widget="video-sidebar"]'),H=0;H<M.length;H++)new e.VideoSidebar(M[H])}(PULSE.app,PULSE.core,PULSE.store,PULSE.app.actions,PULSE.app.common),function(e,t){e.VideoDescriptionEmbeddable=function(t){var i=this;e.VideoDescription.call(i,t)},e.VideoDescriptionEmbeddable.prototype=Object.create(e.VideoDescription.prototype),e.VideoDescriptionEmbeddable.prototype.subscribe=function(){var e=this,i=watch(t.getState,["activeVideo","currentTime"]);t.subscribe(i(function(i){var a=t.getState().activeVideo.data;a&&a.id.toString()===e.id&&e.onTimeUpdate(i)}))}}(PULSE.app,PULSE.store);var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e};!function(e,t,i,a){var n="js-article-modal-viewport",o="live-blog-post",l="live-blog-post--top",s="blog-player",r=1e3,d="no-controls",c="js-video-description",v="No informat",u={root:null,rootMargin:"0px",threshold:.3},p="video-player__player--mini",E="video-player--mini",m="video-player__player--mini-in",_="video-player__player--mini-top",g="video-player__player--mini-fixed",f="video-player__player--fade-in",S=250,b=function(){var e=this,i=t.getState().activeVideo.data,n=!!i&&i.id===e.initialIds.id,o=t.getState().activeVideo.playState===CONSTANTS.VIDEO_PLAY_STATE.PLAYING,l=t.getState().activeVideo.playState===CONSTANTS.VIDEO_PLAY_STATE.PAUSED,s=a.style.hasClass(e.playerElement,m);return n&&o||n&&l&&s},y=function(e){if(!e)return{};var t=document.body.getBoundingClientRect();return t.width<=r?{rootMargin:"0px",root:null}:{rootMargin:"-300px 0px 0px 0px",root:document.querySelector(".js-mc-main-col")}},h=function(){var e=this;e.observer=new IntersectionObserver(function(t){if(b.call(e)){if(e.ignoreInitialIntersection)return void(e.ignoreInitialIntersection=!1);var i=t[0];return i.intersectionRatio>u.threshold&&1!==i.intersectionRatio?e.hideMiniPlayer():void e.showMiniPlayer()}},e.inBlog?_extends({},u,y(e.inBlog)):u),e.observer.observe(e.element)},P=function(e){var t=DOM_HELPER.hasParentWithClass(o,e);return t&&a.style.addClass(t,l),t},L=function(e){return DOM_HELPER.hasParentWithClass(n,e)};e.VideoPlayerEmbeddable=function(i){var a=this;a.container=i;var n=JSON.parse(a.container.dataset.analyticsModel);a.embedVideoTracking={videoName:n.title,videoId:Number(n.id),videoAudio:v,videoDuracio:TEMPLATE_HELPER.contentHasTag(n.tags,"content-type-video--live")?"live":Number(n.duration)||v,videoStreaming:TEMPLATE_HELPER.contentHasTag(n.tags,"content-type-video--live")?"live":"on demand",videoPlayerQuality:v,videoSuscripcio:TEMPLATE_HELPER.contentHasTag(n.tags,"entitlement-type-free")?"obert":"registre",videoDataEvent:(new Date).toDateString()||v,videoDataPublicacio:PUBLISH_DATE_HELPER.getPublishDate(Number(n.publishFrom))||v,videoDiesDesdePublicacio:TEMPLATE_HELPER.contentHasTag(n.tags,"content-type-video--live")?"zero":PUBLISH_DATE_HELPER.getDaysSincePublishDate(Number(n.publishFrom))||v,videoRelacionat:"false",videoCompeticio:COMPETITION_HELPER.getCompetitionId(n.references),videoTemporada:v,videoCategoria:TEMPLATE_HELPER.getTagsAsString(n.tags).split(",").join("|")};var o=window.innerWidth<=CONSTANTS.BREAKPOINTS.PHABLET,l="true"===i.getAttribute("data-autoplay-mobile")&&o;e.PlayerManager.onKDPReady(function(){a.init(i,l,a.embedVideoTracking);var n="."+c+"-"+a.element.getAttribute("data-id"),o=document.querySelector(n);o&&(a.description=new e.VideoDescriptionEmbeddable(o)),a.initialIds.id&&(a.initialIds.id=Number(a.initialIds.id),a.playVideoWithId(a.initialIds)),a.inBlog=P.call(a,a.element),a.inModal=L.call(a,a.element),a.useParentSize="true"===i.getAttribute("data-parent-size"),a.displayMiniPlayer="false"!==i.getAttribute("data-mini-player"),a.parentMinViewport=Number(i.getAttribute("data-parent-min-width"))||0,a.displayMiniPlayer&&(a.onMiniPlayerClick=function(e){e.stopPropagation();var i=t.getState().activeVideo.playState===CONSTANTS.VIDEO_PLAY_STATE.PLAYING;return i?a.playerElement.sendNotification(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.PAUSE):void a.playerElement.sendNotification(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.PLAY)})},this)},e.VideoPlayerEmbeddable.prototype=Object.create(e.VideoPlayer.prototype),e.VideoPlayerEmbeddable.prototype.playerReady=function(n){var o=this;e.VideoPlayer.prototype.playerReady.call(o,n,o.embedVideoTracking.videoDuracio,!0),o.displayMiniPlayer&&h.call(o),o.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.PLAY,function(){t.dispatch(i.ActiveVideo.setPlayState(CONSTANTS.VIDEO_PLAY_STATE.PLAYING))}),o.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.PLAYED,function(){o.initialIds.id&&(e.PlayerManager.stopOtherPlayers(o),t.dispatch(i.ActiveVideo.setActiveVideo(o.initialIds)),t.dispatch(i.ActiveVideo.setPlayState(CONSTANTS.VIDEO_PLAY_STATE.PLAYING)))}),o.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.PLAY_END,function(){t.dispatch(i.ActiveVideo.setPlayState(CONSTANTS.VIDEO_PLAY_STATE.ENDED)),o.hideMiniPlayer()}),o.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.CLOSE_FULL_SCREEN,function(){o.ignoreInitialIntersection=!0,o.observer.observe(o.element)}),o.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.HAS_CLOSED_FULL_SCREEN,function(){o.inModal&&setTimeout(function(){o.inModal.scrollTop=o.restoreScroll||0},S)}),o.playerElement.kBind(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.OPEN_FULL_SCREEN,function(){a.style.removeClass(o.playerElement,f),o.observer.unobserve(o.element),o.inModal&&(o.restoreScroll=o.inModal.scrollTop)}),o.inBlog&&o.playerElement.sendNotification(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.ADD_CLASS,s)},e.VideoPlayerEmbeddable.prototype.showMiniPlayer=function(){var e=this;e.useParentSize&&window.matchMedia("(min-width: "+e.parentMinViewport+"px)").matches&&(e.playerElement.style.width=e.playerElement.offsetWidth+"px",e.playerElement.style.height=e.playerElement.offsetHeight+"px"),a.style.addClass(e.playerElement,p),a.style.addClass(e.playerElement,_),a.style.addClass(e.playerElement,g),a.style.addClass(e.element,E),a.style.addClass(e.playerElement,m),e.playerElement.sendNotification(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.ADD_CLASS,d),e.playerElement.addEventListener("click",e.onMiniPlayerClick,!0)},e.VideoPlayerEmbeddable.prototype.hideMiniPlayer=function(){var e=this;a.style.hasClass(e.playerElement,m)&&(a.style.removeClass(e.playerElement,m),a.style.removeClass(e.playerElement,f),a.style.removeClass(e.element,E),e.playerElement.removeEventListener("click",e.onMiniPlayerClick,!0),e.useParentSize&&window.matchMedia("(min-width: "+e.parentMinViewport+"px)").matches&&(e.playerElement.style.width="auto",e.playerElement.style.height="auto"),a.style.removeClass(e.playerElement,_),a.style.removeClass(e.playerElement,p),a.style.removeClass(e.playerElement,g),e.playerElement.sendNotification(CONSTANTS.VIDEO_PLAYER_AMG_EVENTS.REMOVE_CLASS,d))};for(var T=document.querySelectorAll('[data-widget="video-player-embeddable"]'),A=0;A<T.length;A++)"true"!==T[A].getAttribute("data-init")&&(new e.VideoPlayerEmbeddable(T[A]),T[A].setAttribute("data-init","true"))}(PULSE.app,PULSE.store,PULSE.app.actions,PULSE.core);